{"version":3,"sources":["com/fulcrologic/fulcro/inspect/inspect_client.cljc"],"mappings":"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","names":["goog/define","js/com","js/com.fulcrologic","js/com.fulcrologic.fulcro","js/com.fulcrologic.fulcro.inspect","js/com.fulcrologic.fulcro.inspect.inspect-client","js/com.fulcrologic.fulcro.inspect.inspect-client.run-picker","com.fulcrologic.fulcro.inspect.inspect-client/run-picker","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","js/com.fulcrologic.fulcro.inspect.inspect-client.started?*","com.fulcrologic.fulcro.inspect.inspect-client/started?*","js/com.fulcrologic.fulcro.inspect.inspect-client.tools-app*","com.fulcrologic.fulcro.inspect.inspect-client/tools-app*","js/com.fulcrologic.fulcro.inspect.inspect-client.apps*","com.fulcrologic.fulcro.inspect.inspect-client/apps*","com.fulcrologic.fulcro.inspect.inspect-client/app-uuid-key","js/com.fulcrologic.fulcro.inspect.inspect-client.send-ch","com.fulcrologic.fulcro.inspect.inspect-client/send-ch","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async/dropping-buffer","com.fulcrologic.fulcro.inspect.inspect-client/post-message","type","data","e51346","cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2","e","taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$11","taoensso.timbre/*config*","cljs.core/Delay","com.fulcrologic.fulcro.inspect.inspect-client/cljs?","env","cljs.core/boolean","var_args","G__51354","com.fulcrologic.fulcro.inspect.inspect-client/isoget","js/Error","obj","k","com.fulcrologic.fulcro.inspect.inspect_client.isoget.cljs$core$IFn$_invoke$arity$3","default","or__4131__auto__","G__51360","G__51361","goog.object/get","G__51362","cljs.core/name","com.fulcrologic.fulcro.inspect.inspect-client/app-state","app","G__51367","cljs.core/deref","com.fulcrologic.fulcro.inspect.inspect-client/runtime-atom","G__51368","com.fulcrologic.fulcro.inspect.inspect-client/state-atom","G__51369","com.fulcrologic.fulcro.inspect.inspect-client/app-uuid","G__51370","cljs.core.get.cljs$core$IFn$_invoke$arity$2","com.fulcrologic.fulcro.inspect.inspect-client/remotes","G__51371","com.fulcrologic.fulcro.inspect.inspect-client/app-id","G__51374","com.fulcrologic.fulcro.inspect.inspect-client/fulcro-app-id","com.fulcrologic.fulcro.inspect.inspect-client/get-component-name","component","G__51375","com.fulcrologic.fulcro.inspect.inspect_client.isoget.cljs$core$IFn$_invoke$arity$2","com.fulcrologic.fulcro.inspect.inspect-client/comp-transact!","tx","options","tx!","com.fulcrologic.fulcro.algorithms.lookup/app-algorithm","com.fulcrologic.fulcro.inspect.inspect-client/MAX_HISTORY_SIZE","com.fulcrologic.fulcro.inspect.inspect-client/current-history-id","com.fulcrologic.fulcro.inspect.inspect-client/record-history-entry!","state","now","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","runtime","history","pruned-history","cljs.core/count","cljs.core.subvec.cljs$core$IFn$_invoke$arity$2","new-history","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","com.fulcrologic.fulcro.inspect.inspect-client/get-history-entry","id","entry","cljs.core/first","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","p__51382","map__51383","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","entry-id","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core/seq","com.fulcrologic.fulcro.inspect.inspect-client/db-changed!","old-state","new-state","app-uuid","state-id","com.fulcrologic.fulcro.inspect.inspect-client/event-data","event","G__51388","goog.object/getValueByKeys","com.fulcrologic.fulcro.inspect.transit/read","com.fulcrologic.fulcro.inspect.inspect-client/start-send-message-loop","c__42006__auto__","cljs.core.async.impl.dispatch/run","f__42007__auto__","switch__41732__auto__","state_51427","state_val_51428","statearr-51433","cljs.core.async.impl.ioc-helpers/take!","inst_51424","cljs.core.async.impl.ioc-helpers/return-chan","inst_51398","statearr-51444","statearr-51447","statearr-51448","inst_51404","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","inst_51406","inst_51407","inst_51408","inst_51410","js/Date","inst_51411","inst_51412","cljs.core/PersistentHashMap","inst_51413","inst_51414","inst_51415","inst_51416","inst_51417","statearr-51454","statearr-51457","statearr-51459","inst_51422","statearr-51460","statearr-51466","state-machine__41733__auto__","ret-value__41734__auto__","result__41735__auto__","cljs.core/keyword-identical?","ex__41736__auto__","e51468","statearr-51469","statearr-51473","state__42008__auto__","statearr-51479","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","js/window","cljs.core/clj->js","com.fulcrologic.fulcro.inspect.transit/write","com.fulcrologic.fulcro.inspect.inspect-client/listen-local-messages","and__4120__auto__","G__51485","com.fulcrologic.fulcro.inspect.inspect-client/handle-devtool-message","G__51489","com.fulcrologic.fulcro.inspect.inspect-client/transact-inspector!","ref","com.fulcrologic.fulcro.inspect.inspect-client/dispose-app","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3","cljs.core/dissoc","com.fulcrologic.fulcro.inspect.inspect-client/set-active-app","com.fulcrologic.fulcro.inspect.inspect-client/send-started!","remote","tx-id","txn","start","cljs.core.sequence.cljs$core$IFn$_invoke$arity$1","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","cljs.core/List","com.fulcrologic.fulcro.inspect.inspect_client.transact_inspector_BANG_.cljs$core$IFn$_invoke$arity$2","com.fulcrologic.fulcro.inspect.inspect-client/send-finished!","response","finished","com.fulcrologic.fulcro.inspect.inspect-client/send-failed!","error","p__51524","map__51525","message","G__51530","cljs.core/Keyword","seq__51531","chunk__51532","count__51533","i__51534","temp__5804__auto__","cljs.core/chunked-seq?","c__4550__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/next","cljs.core/vals","remote-names","cljs.core.sort_by.cljs$core$IFn$_invoke$arity$2","p1__51519#","cljs.core.juxt.cljs$core$IFn$_invoke$arity$2","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core/str","cljs.core/keys","map__51551","target-state","temp__5802__auto__","render!","map__51558","b2__43106__auto__","map__51577","value","cljs.core/reset!","G__51579","G__51580","map__51587","based-on","map__51592","prior-state","diff","com.fulcrologic.fulcro.inspect.diff/diff","G__51594","cljs.core/not","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","map__51602","tx-ref","fexpr__51613","e51614","js/alert","_e","map__51618","query","mutation","remote-name","msg-id","transmit!","ast","edn-query-language.core/query->ast","cljs.core/random-uuid","G__51629","G__51630","cljs.core/identity","p__51631","map__51632","body","result","error?","map__51635","log","log-js","warn","js/console.log","js/console.warn","js/console.error","com.fulcrologic.fulcro.inspect.inspect-client/install","_","js/document.documentElement.setAttribute","com.fulcrologic.fulcro.inspect.inspect-client/app-started!","js/goog.DEBUG","com.fulcrologic.fulcro.inspect.inspect-client/INSPECT","networking","state*","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4","cljs.core/assoc","p1__51639#","p1__51642#","p2__51643#","p3__51640#","p4__51641#","cljs.core/add-watch","p__51644","p__51645","map__51647","map__51649","com.fulcrologic.fulcro.inspect.inspect-client/optimistic-action-finished!","state-id-before","db-before","db-after","component-name","current-id","G__51657"],"sourcesContent":["(ns ^:no-doc com.fulcrologic.fulcro.inspect.inspect-client\n  \"Functions used by Fulcro to talk to Fulcro Inspect.\"\n  #?(:cljs (:require-macros com.fulcrologic.fulcro.inspect.inspect-client))\n  (:require\n    [edn-query-language.core :as eql]\n    [com.fulcrologic.fulcro.algorithms.lookup :as ah]\n    #?@(:cljs [[goog.object :as gobj]\n               [com.fulcrologic.fulcro.inspect.diff :as diff]\n               [com.fulcrologic.fulcro.inspect.transit :as encode]\n               [cljs.core.async :as async]])\n    [taoensso.encore :as encore]\n    [taoensso.timbre :as log]\n    [taoensso.encore :as enc]))\n\n#?(:cljs (goog-define INSPECT false))\n\n;; This is here so that you can include the element picker without killing React Native\n(defonce run-picker (atom nil))\n\n(declare handle-devtool-message)\n(defonce started?* (atom false))\n(defonce tools-app* (atom nil))\n(defonce apps* (atom {}))\n(def app-uuid-key :fulcro.inspect.core/app-uuid)\n\n(defonce send-ch #?(:clj nil :cljs (async/chan (async/dropping-buffer 50000))))\n(defn post-message [type data]\n  #?(:cljs (try\n             (async/put! send-ch [type data])\n             (catch :default e\n               (log/error \"Cannot send to inspect. Channel closed. See https://book.fulcrologic.com/#err-inspect-ch-closed\")))))\n\n(defn cljs?\n  \"Returns true when env is a cljs macro &env\"\n  [env]\n  (boolean (:ns env)))\n\n(defn- isoget\n  \"Like get, but for js objects, and in CLJC. In clj, it is just `get`. In cljs it is\n  `gobj/get`.\"\n  ([obj k] (isoget obj k nil))\n  ([obj k default]\n   #?(:clj  (get obj k default)\n      :cljs (or (gobj/get obj (some-> k (name))) default))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; Helpers so we don't have to include other nses\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n(defn app-state [app] (some-> app :com.fulcrologic.fulcro.application/state-atom deref))\n(defn runtime-atom [app] (some-> app :com.fulcrologic.fulcro.application/runtime-atom))\n(defn state-atom [app] (some-> app :com.fulcrologic.fulcro.application/state-atom))\n(defn app-uuid [app] (some-> app :com.fulcrologic.fulcro.application/state-atom deref (get app-uuid-key)))\n(defn remotes [app] (some-> (runtime-atom app) deref :com.fulcrologic.fulcro.application/remotes))\n(defn app-id [app] (some-> (app-state app) :fulcro.inspect.core/app-id))\n(defn fulcro-app-id [app] (:com.fulcrologic.fulcro.application/id app))\n(defn get-component-name [component] (when component (some-> (isoget component :fulcro$options) :displayName)))\n(defn comp-transact! [app tx options]\n  (let [tx! (ah/app-algorithm app :tx!)]\n    (tx! app tx options)))\n\n(def MAX_HISTORY_SIZE 100)\n\n(defn current-history-id\n  \"Current time in the recorded history of states\"\n  [app]\n  (or (-> app (runtime-atom) deref ::time) 1))\n\n(defn record-history-entry!\n  \"Record a state change in this history. Returns the ID of the newly recorded entry.\"\n  [app state]\n  (let [now (current-history-id app)]\n    (swap! (runtime-atom app)\n      (fn [runtime]\n        (let [history        (::history runtime)\n              pruned-history (cond\n                               (nil? history) []\n                               (> (count history) MAX_HISTORY_SIZE) (subvec history 1)\n                               :else history)\n              new-history    (conj pruned-history {:id    now\n                                                   :value state})]\n          (assoc runtime\n            ::time (inc now)\n            ::history new-history))))\n    now))\n\n(defn get-history-entry [app id]\n  (let [history (-> app runtime-atom deref ::history)\n        entry   (first (filter\n                         (fn [{entry-id :id}] (= id entry-id))\n                         (seq history)))]\n    entry))\n\n\n(defn db-changed!\n  \"Notify Inspect that the database changed\"\n  [app old-state new-state]\n  #?(:cljs\n     (let [app-uuid (app-uuid app)\n           state-id (record-history-entry! app new-state)]\n       (post-message :fulcro.inspect.client/db-changed! {app-uuid-key                    app-uuid\n                                                         :fulcro.inspect.client/state-id state-id}))))\n\n(defn event-data [event]\n  #?(:cljs (some-> event (gobj/getValueByKeys \"data\" \"fulcro-inspect-devtool-message\") encode/read)))\n\n(defn start-send-message-loop []\n  #?(:cljs\n     (async/go-loop []\n       (when-let [[type data] (async/<! send-ch)]\n         (.postMessage js/window (clj->js {:fulcro-inspect-remote-message (encode/write {:type type :data data :timestamp (js/Date.)})}) \"*\")\n         (recur)))))\n\n(defn listen-local-messages []\n  #?(:cljs\n     (.addEventListener js/window \"message\"\n       (fn [^js event]\n         (cond\n           (and (identical? (.-source event) js/window)\n             (gobj/getValueByKeys event \"data\" \"fulcro-inspect-devtool-message\"))\n           (handle-devtool-message (event-data event))\n\n           (and (identical? (.-source event) js/window)\n             (gobj/getValueByKeys event \"data\" \"fulcro-inspect-start-consume\"))\n           (start-send-message-loop)))\n       false)))\n\n(defn transact-inspector!\n  ([tx]\n   (post-message :fulcro.inspect.client/transact-inspector {:fulcro.inspect.client/tx tx}))\n  ([ref tx]\n   (post-message :fulcro.inspect.client/transact-inspector {:fulcro.inspect.client/tx-ref ref :fulcro.inspect.client/tx tx})))\n\n(defn dispose-app [app-uuid]\n  (swap! apps* dissoc app-uuid)\n  (post-message :fulcro.inspect.client/dispose-app {app-uuid-key app-uuid}))\n\n(defn set-active-app [app-uuid]\n  (post-message :fulcro.inspect.client/set-active-app {app-uuid-key app-uuid}))\n\n#_(defn inspect-app [app]\n    #?(:cljs\n       (let [networking (remotes app)\n             state*     (state-atom app)\n             app-uuid   (random-uuid)]\n\n         (swap! apps* assoc app-uuid app)\n         #_(update-state-history app @state*)\n\n         (post-message :fulcro.inspect.client/init-app {app-uuid-key                         app-uuid\n                                                        :fulcro.inspect.core/app-id          (app-id app)\n                                                        :fulcro.inspect.client/remotes       (sort-by (juxt #(not= :remote %) str) (keys networking))\n                                                        :fulcro.inspect.client/initial-state @state*\n                                                        :fulcro.inspect.client/state-hash    (hash @state*)})\n\n         (add-watch state* app-uuid #(db-update app app-uuid %3 %4))\n\n         (swap! state* assoc app-uuid-key app-uuid)\n\n         app)))\n\n(defn send-started! [app remote tx-id txn]\n  #?(:cljs\n     (let [start    (js/Date.)\n           app-uuid (app-uuid app)]\n       (transact-inspector! [:fulcro.inspect.ui.network/history-id [app-uuid-key app-uuid]]\n         [`(fulcro.inspect.ui.network/request-start ~{:fulcro.inspect.ui.network/remote             remote\n                                                      :fulcro.inspect.ui.network/request-id         tx-id\n                                                      :fulcro.inspect.ui.network/request-started-at start\n                                                      :fulcro.inspect.ui.network/request-edn        txn})]))))\n\n(defn send-finished! [app remote tx-id response]\n  #?(:cljs\n     (let [finished (js/Date.)\n           app-uuid (app-uuid app)]\n       (transact-inspector! [:fulcro.inspect.ui.network/history-id [app-uuid-key app-uuid]]\n         [`(fulcro.inspect.ui.network/request-finish ~{:fulcro.inspect.ui.network/request-id          tx-id\n                                                       :fulcro.inspect.ui.network/request-finished-at finished\n                                                       :fulcro.inspect.ui.network/response-edn        response})]))))\n\n(defn send-failed! [app tx-id error]\n  #?(:cljs\n     (let [finished (js/Date.)\n           app-uuid (app-uuid app)]\n       (transact-inspector! [:fulcro.inspect.ui.network/history-id [app-uuid-key app-uuid]]\n         [`(fulcro.inspect.ui.network/request-finish ~{:fulcro.inspect.ui.network/request-id          tx-id\n                                                       :fulcro.inspect.ui.network/request-finished-at finished\n                                                       :fulcro.inspect.ui.network/error               error})]))))\n\n;; LANDMARK: Incoming message handler for Inspect\n(defn handle-devtool-message [{:keys [type data] :as message}]\n  (log/debug \"Devtools Message received\" message)\n  #?(:cljs\n     (case type\n       :fulcro.inspect.client/request-page-apps\n       (do\n         (doseq [app (vals @apps*)]\n           (let [state        (app-state app)\n                 state-id     (record-history-entry! app state)\n                 remote-names (remotes app)]\n             (post-message :fulcro.inspect.client/init-app\n               {app-uuid-key                                (app-uuid app)\n                :fulcro.inspect.core/app-id                 (app-id app)\n                :fulcro.inspect.client/remotes              (sort-by (juxt #(not= :remote %) str)\n                                                              (keys remote-names))\n                :fulcro.inspect.client/initial-history-step {:id    state-id\n                                                             :value state}}))))\n\n       :fulcro.inspect.client/reset-app-state\n       (let [{:keys                     [target-state]\n              :fulcro.inspect.core/keys [app-uuid]} data]\n         (if-let [app (get @apps* app-uuid)]\n           (let [render! (ah/app-algorithm app :schedule-render!)]\n             (when (:id target-state)\n               (let [{:keys [id]} target-state]\n                 (enc/when-let [app (get @apps* app-uuid)\n                                {:keys [value]} (get-history-entry app id)]\n                   (reset! (state-atom app) value))))\n             (render! app {:force-root? true}))\n           (log/info \"Reset app on invalid uuid\" app-uuid)))\n\n       ;; Remote tool has asked for the history step at id, and can accept a diff from the given closest entry\n       :fulcro.inspect.client/fetch-history-step\n       (let [{:keys                     [id based-on]\n              :fulcro.inspect.core/keys [app-uuid]} data]\n         (enc/when-let [app (get @apps* app-uuid)\n                        {:keys [value]} (get-history-entry app id)]\n           (let [prior-state (get-history-entry app based-on)\n                 diff        (when prior-state (diff/diff prior-state value))]\n             (post-message :fulcro.inspect.client/history-entry\n               (cond-> {app-uuid-key                  app-uuid\n                        :fulcro.inspect.core/state-id id}\n                 diff (assoc :fulcro.inspect.client/diff diff\n                             :based-on based-on)\n                 (not diff) (assoc :fulcro.inspect.client/state value))))))\n\n\n       :fulcro.inspect.client/transact\n       (let [{:keys                     [tx tx-ref]\n              :fulcro.inspect.core/keys [app-uuid]} data]\n         (if-let [app (get @apps* app-uuid)]\n           (if tx-ref\n             (comp-transact! app tx {:ref tx-ref})\n             (comp-transact! app tx {}))\n           (log/error \"Transact on invalid uuid\" app-uuid \"See https://book.fulcrologic.com/#err-inspect-invalid-app-uuid\")))\n\n       :fulcro.inspect.client/pick-element\n       (if @run-picker\n         (@run-picker data)\n         (try\n           (js/alert \"Element picker not installed. Add it to your preload.\")\n           (catch :default _e\n             (log/error \"Element picker not installed in app. You must add it to you preloads. See https://book.fulcrologic.com/#err-inspect-elm-picker-missing\"))))\n\n       ;; These couple us to react, and side-effect are often tied to React lifecycle, so they are not worth the glamor\n       #_#_:fulcro.inspect.client/show-dom-preview\n           (encore/if-let [{:fulcro.inspect.core/keys [app-uuid]} data\n                           app (some-> @apps* (get app-uuid))\n                           {:keys [value]} (get-history-entry app (:fulcro.inspect.client/state-id data))]\n             (if (map? value)\n               (binding [fdn/*denormalize-time* 900000000   ; force our props to seem like the most recent\n                         comp/*app*             app\n                         rc/*shared*            {}          ;; TODO: don't have historical shared props...\n                         comp/*depth*           0]\n                 (render-state! app value))\n           (log/error \"Unable to find app/state for preview. See https://book.fulcrologic.com/#err-inspect-cant-find-app\")))\n\n       #_#_:fulcro.inspect.client/hide-dom-preview\n           (encore/when-let [{:fulcro.inspect.core/keys [app-uuid]} data\n                             app     (some-> @apps* (get app-uuid))\n                             render! (ah/app-algorithm app :render!)]\n             (render! app {:force-root? true}))\n\n       :fulcro.inspect.client/network-request\n       (let [{:keys                          [query mutation]\n              remote-name                    :fulcro.inspect.client/remote\n              :fulcro.inspect.ui-parser/keys [msg-id]\n              :fulcro.inspect.core/keys      [app-uuid]} data]\n         (encore/when-let [app       (get @apps* app-uuid)\n                           remote    (get (remotes app) remote-name)\n                           transmit! (-> remote :transmit!)\n                           ast       (eql/query->ast (or query mutation))\n                           tx-id     (random-uuid)]\n           (send-started! app remote-name tx-id (or query mutation))\n           (transmit! remote {:com.fulcrologic.fulcro.algorithms.tx-processing/id             tx-id\n                              :com.fulcrologic.fulcro.algorithms.tx-processing/ast            ast\n                              :com.fulcrologic.fulcro.algorithms.tx-processing/idx            0\n                              :com.fulcrologic.fulcro.algorithms.tx-processing/options        {}\n                              :com.fulcrologic.fulcro.algorithms.tx-processing/update-handler identity\n                              :com.fulcrologic.fulcro.algorithms.tx-processing/result-handler (fn [{:keys [body] :as result}]\n                                                                                                (let [error? (ah/app-algorithm app :remote-error?)]\n                                                                                                  (if (error? result)\n                                                                                                    (send-failed! app tx-id result)\n                                                                                                    (send-finished! app remote-name tx-id body)))\n                                                                                                (post-message :fulcro.inspect.client/message-response\n                                                                                                  {:fulcro.inspect.ui-parser/msg-id       msg-id\n                                                                                                   :fulcro.inspect.ui-parser/msg-response body}))})))\n\n       :fulcro.inspect.client/console-log\n       (let [{:keys [log log-js warn error]} data]\n         (cond\n           log\n           (js/console.log log)\n\n           log-js\n           (js/console.log (clj->js log-js))\n\n           warn\n           (js/console.warn warn)\n\n           error\n           (js/console.error error)))\n\n       :fulcro.inspect.client/check-client-version\n       (post-message :fulcro.inspect.client/client-version {:version \"3.0.0\"})\n\n       (log/debug \"Unknown message\" type))))\n\n\n(defn install [_]\n  #?(:cljs\n     (do\n       (js/document.documentElement.setAttribute \"__fulcro-inspect-remote-installed__\" true)\n\n       (when-not @started?*\n         (log/info \"Installing Fulcro 3.x Inspect\" {})\n\n         (reset! started?* true)\n\n         (listen-local-messages)))))\n\n(defn app-started!\n  \"Register the application with Inspect, if it is available.\"\n  [app]\n  #?(:cljs\n     (when (and (or goog.DEBUG INSPECT) (not= \"disabled\" INSPECT))\n       (let [networking (remotes app)\n             state*     (state-atom app)\n             app-uuid   (fulcro-app-id app)]\n         (swap! apps* assoc app-uuid app)\n         (record-history-entry! app @state*)\n         (swap! state* assoc app-uuid-key app-uuid)\n         (post-message :fulcro.inspect.client/init-app {app-uuid-key                         app-uuid\n                                                        :fulcro.inspect.core/app-id          (app-id app)\n                                                        :fulcro.inspect.client/remotes       (sort-by (juxt #(not= :remote %) str) (keys networking))\n                                                        :fulcro.inspect.client/initial-state @state*})\n         (add-watch state* app-uuid #(db-changed! app %3 %4))))))\n\n(defn optimistic-action-finished!\n  \"Notify inspect that a transaction finished.\n\n   app - The app\n   env - The mutation env that completed.\"\n  [app\n   {:keys [component ref state com.fulcrologic.fulcro.algorithms.tx-processing/options]}\n   {:keys [tx-id tx state-id-before db-before db-after]}]\n  #?(:cljs\n     (let [component-name (get-component-name component)\n           current-id     (current-history-id app)\n           tx             (cond-> {:fulcro.inspect.ui.transactions/tx-id                    tx-id\n                                   :fulcro.history/client-time                              (js/Date.)\n                                   :fulcro.history/tx                                       tx\n                                   :fulcro.history/db-before-id                             state-id-before\n                                   :fulcro.history/db-after-id                              current-id\n                                   :fulcro.history/network-sends                            []\n                                   :com.fulcrologic.fulcro.algorithms.tx-processing/options options}\n                            component-name (assoc :component component-name)\n                            ref (assoc :ident-ref ref))\n           app-uuid       (app-uuid app)]\n       (post-message :fulcro.inspect.client/new-client-transaction {app-uuid-key              app-uuid\n                                                                    :fulcro.inspect.client/tx tx}))))\n\n(defmacro ido\n  \"Wrap a block of code that will only run if Inspect is enabled.  Code in these blocks will also be removed via\n  DCE in Closure.\n\n  This macro emits nothing when run in clj, and will output code that\n  should be completely removed by the Closure compiler if both\n  goog.DEBUG and com.fulcrologic.fulcro.inspect.inspect-client/INSPECT are false.\n\n  This allows you to enable inspect messages in production by adding the following to\n  your compiler config:\n\n  :closure-defines {\\\"com.fulcrologic.fulcro.inspect.inspect_client.INSPECT\\\" true}\n  \"\n  [& body]\n  (when (cljs? &env)\n    `(when (and (or ~'goog.DEBUG INSPECT) (not= \"disabled\" INSPECT))\n       (try\n         ~@body\n         (catch :default ~'e)))))\n\n(defmacro ilet\n  \"Like `clojure.core/let`, but elides the block if Inspect isn't enabled.\n\n  This macro emits nothing when run in clj, and will output code that\n  should be completely removed by the Closure compiler if both\n  goog.DEBUG and com.fulcrologic.fulcro.inspect.inspect-client/INSPECT are false.\n\n  This allows you to enable inspect messages in production by adding the following to\n  your compiler config:\n\n  :closure-defines {\\\"com.fulcrologic.fulcro.inspect.inspect_client.INSPECT\\\" true}\n  \"\n  [bindings & body]\n  (when (cljs? &env)\n    `(ido\n       (let ~bindings\n         ~@body))))\n"]}